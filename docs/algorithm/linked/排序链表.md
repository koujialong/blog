# 排序链表 LC-148

## 题目

给你链表的头结点 head ，请将其按 升序 排列并返回 排序后的链表 。

* 输入：head = [4,2,1,3]
* 输出：[1,2,3,4]

## 题解

- 数组排序

```javascript
/**
 * @param {ListNode} head
 * @return {ListNode}
 */
var sortList = function (head) {
    if (!head) {
      return head;
    }
    const arr = [];
    // 转数组
    while (head) {
      arr.push(head);
      head = head.next;
    }
    // 排序
    arr.sort((a, b) => a.val - b.val);
    for (let i = 0; i < arr.length - 1; i++) {
      arr[i].next = arr[i + 1];
    }

    // 链接
    arr[arr.length - 1].next = null;
    return arr[0];
  };
```

- 归并排序

![img](/img/sort-link.png)

```javascript
/**
 * @param {ListNode} head
 * @return {ListNode}
 */
var sortList = function (head) {
    // 一个或两个节点不用切分
    if (!head || !head.next) {
      return head;
    }
    // 快慢指针找到链表中间位置切分
    let slow = head,
      fast = head;
    let preSlow = null;
    while (fast && fast.next) {
      preSlow = slow;
      slow = slow.next;
      fast = fast.next.next;
    }
    preSlow.next = null;
    const l = sortList(head);
    const r = sortList(slow);
    // 递归合并排序数组
    return merge(l, r);
  };

function merge(l1, l2) {
  // 创建虚拟头节点
  const dummy = new ListNode(0);
  let pre = dummy;
  // 分别比较两个链表值排序
  while (l1 && l2) {
    if (l1.val < l2.val) {
      pre.next = l1;
      l1 = l1.next;
    } else {
      pre.next = l2;
      l2 = l2.next;
    }
    pre = pre.next;
  }
  // 有两个链表不一样长的情况，链接剩余链
  if (l1) {
    pre.next = l1;
  }
  if (l2) {
    pre.next = l2;
  }
  return dummy.next;
}
```
