# 前端性能优化

## 网络优化

- DNS预解析（dns-prefetch）
- 使用CDN加速静态资源
- 开启gzip、 deflate、br等压缩方式
- 使用图床加载图片资源，使用webp等图片格式
- 开启资源缓存（强缓存和协商缓存，web service等，indexDB）
- 多域名(2-4)部署,增加并发能力

## 渲染优化

- 避免css阻塞（css放入header中，尽早加载css）
- 减少回流重绘
- 减少样式嵌套
- 减少css表达式
- 尽量使用css动画或者canvas动画
- 避免js阻塞（js会阻断渲染，js增加defer或者async）
- 使用外链的js和css（便于浏览器缓存）
- 使用iconfont(减小加载体积和icon质量)
- 首屏加载优化（使用骨架屏和按需加载资源）

## 代码优化

- 使用防抖和节流
- 密集计算使用web worker
- 计算结果缓存

## 图片优化

- 图片懒加载
- css代替图片
- 图片压缩webp等格式
- 图床按宽高加载图片

## 打包优化

- 缩小loader的查找范围(配置include/exclude)
- 缓存副本（各种cache配置）
- 指定三方库的查找目录（resolve.modules）
- 抽离css(mini-css-extract-plugin)
- js代码压缩（配置mode:production使用terser-webpack-plugin压缩）
- css压缩（css-minimizer-webpack-plugin）
- Html压缩（HtmlwebpackPlugin）
- 文件压缩（compression-webpack-plugin）开启gzip
- 图片压缩（image-webpack-loader）
- js去除死代码（Tree shaking）
- css去除死代码（purgecss-plugin-webpack）
- 代码分离（splitChunksPlugin）
- 提前构建（DllPlugin）
- 并行构建（thread-loader）

## 框架相关优化
- vue
  - v-for添加key
  - 路由懒加载
  - 第三方插件按需引入
  - 合理使用computed和watch
  - v-for的同时避免使用v-if
  - destory时销毁事件：比如addEventListener添加的事件、setTimeout、setInterval、bus.$on绑定的监听事件等

- react
  - map循环展示添加key
  - 路由懒加载
  - 第三方插件按需引入
  - 使用memo或者pureComponent避免不必要的渲染
  - 合理使用useMemo、memo、useCallback
